!function(){let e,n,t,o,a,i,d,s,c,r,l,p,h,f=window.Feedbackchimp,g=!1,m=!1,u=!1,b=!1;const x=300;let y="https://widget.feedbackchimp.com";function w(){s&&(s.style.display="block",b=!0,setTimeout((()=>{b=!1}),x))}function k(){s&&!b&&(s.style.display="none")}function v(e=!1){if(!u)return;const n=window.location.pathname;if(n.startsWith(p.basePath)){const t=n.slice(p.basePath.length),o=document.querySelector("iframe");if(o){let n=!1;try{n="about:blank"===o.contentWindow.location.href}catch{}if(n){let e=`https://${p.organization}.feedbackchimp.space/${t}`;e=e.replace(/([^:]\/)\/+/g,"$1").replace(/\/+$/,"");const n=new URLSearchParams(p).toString();o.src=`${e}?${n}`}else o.contentWindow.postMessage({type:"externalRouteChange",path:t,pop:e},`https://${p.organization}.feedbackchimp.space`)}}}window.Feedbackchimp=function(f,x){if("initialize_changelog_widget"===f){g=!0,r=x;var C=document.createElement("style");if(C.textContent="\n                @keyframes slideDown {\n                    0% {\n                        max-height: 100px;\n                        opacity: 0.4;\n                    }\n                    100% {\n                        max-height: 350px;\n                        opacity: 1;\n                    }\n                }\n            ",document.head.appendChild(C),o=document.querySelector("[data-feeadbackchimp-changelog]"),!o)return;a=o.querySelector("#fc-update-badge"),e=document.createElement("div"),e.style.cssText="\n                background: rgb(255, 255, 255);\n                filter: drop-shadow(rgba(0, 0, 0, 0.1) 0px 20px 13px);\n                height: 350px;\n                max-height: 350px;\n                border-radius: 8px;\n                overflow: hidden;\n                position: fixed;\n                transition: height .24s ease, max-height .24s ease, opacity .2s ease;\n                width: 340px;\n                will-change: height, margin-top, opacity, box-shadow;\n                animation: slideDown .3s ease;\n                z-index: 2147483647;\n                display: none;\n            ",t=document.createElement("iframe"),t.style.cssText="\n                border: none;\n                height: 100%;\n                overflow: hidden;\n                position: relative;\n                width: 100%;\n                z-index: 2147483647;\n                background: rgb(255, 255, 255);\n            ";const $=Object.keys(x).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(x[e])})).join("&");function E(){const n=o.getBoundingClientRect(),t=window.innerWidth,a=window.innerHeight;let i,d;function s(o){switch(o){case"right":if(n.right+e.offsetWidth+8<=t)return i=n.right+8,d=n.top,!0;break;case"left":if(n.left-e.offsetWidth-8>=0)return i=n.left-e.offsetWidth-8,d=n.top,!0;break;case"top":if(n.top-e.offsetHeight-8>=0)return i=n.left+n.width/2-e.offsetWidth/2,d=n.top-e.offsetHeight-8,!0;break;case"bottom":if(n.bottom+e.offsetHeight+8<=a)return i=n.left+n.width/2-e.offsetWidth/2,d=n.bottom+8,!0}return!1}if(!s(x.placement||"bottom")){const e=["bottom","right","left","top"];for(const n=0;n<e.length&&!s(e[n]);n++);}i=Math.max(8,Math.min(i,t-e.offsetWidth-8)),d=Math.max(8,Math.min(d,a-e.offsetHeight-8)),e.style.left=`${i}px`,e.style.top=`${d}px`}t.src=`${y}/changelog/mini?`+$,e.appendChild(t),document.body.appendChild(e),o.addEventListener("click",(function(n){n.stopPropagation(),"none"===e.style.display?(e.style.display="block",E(),e.style.animation="none",e.offsetHeight,e.style.animation="slideDown 0.3s ease forwards"):e.style.display="none"})),document.addEventListener("click",(function(n){"none"===e.style.display||e.contains(n.target)||n.target===o||(e.style.display="none")})),window.addEventListener("resize",E),window.addEventListener("message",(function(n){var t;n.origin===y&&"closeChangelog"===n.data?e.style.display="none":n.data&&"updateUnviewedChangelogCount"===n.data.action&&(h=n.data.content,t=n.data.content,a&&(a.textContent=t,a.style.display=t?"inline":"none"))}),!1)}else if("open_changelog_popup"===f){if(!g)return;i||function(){const e=document.createElement("style");e.textContent="\n            @keyframes changelogFadeIn {\n                from { opacity: 0; }\n                to { opacity: 1; }\n            }\n        ",document.head.appendChild(e),i=document.createElement("div"),i.style.cssText="\n            align-items: center;\n            animation: changelogFadeIn .2s linear;\n            backdrop-filter: blur(2px);\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n            inset: 0;\n            justify-content: start;\n            opacity: 1;\n            overflow: auto;\n            overflow-x: hidden;\n            position: fixed;\n            transition: opacity .3s ease-in-out, visibility .3s linear;\n            width: 100%;\n            z-index: 2147483647;\n            background: rgba(255, 255, 255, 0.1);\n        ",d=document.createElement("iframe"),d.style.cssText="\n            border-radius: 12px;\n            margin-bottom: 12px;\n            margin-top: 5%;\n            max-height: 700px;\n            min-height: 700px;\n            overflow: hidden !important;\n            transition: height .95s ease, min-height .95s ease, opacity .3s ease;\n            user-select: none;\n            width: 608px;\n            z-index: 1000;\n            background: rgb(245, 246, 249);\n            box-shadow: rgba(0, 0, 0, 0.1) 0px 15px 25px;\n            border: 1px solid rgb(222, 225, 234);\n            height: 700px;\n        ",i.appendChild(d),document.body.appendChild(i),i.addEventListener("click",(function(e){e.target===i&&(i.style.display="none")})),window.addEventListener("message",(function(e){e.origin===y&&"closeManualChangelog"===e.data&&(i.style.display="none")}),!1)}();const L=new URLSearchParams(r).toString();let S=`${y}/changelog/popup`;if(x&&x.slug&&(S+="/"+encodeURIComponent(x.slug)),d.src=S+"?"+L,i.style.display="flex",x&&x.slug){const z=new URL(d.src);z.searchParams.set("slug",x.slug),d.src=z.toString()}}else if("initialize_feedback_widget"===f)m=!0,l=x,function(e){s=document.createElement("div"),s.style.cssText=`\n            position: fixed;\n            ${"left"===e.placement?"left: 20px;":"right: 20px;"}\n            bottom: 20px;\n            width: 400px;\n            height: 600px;\n            background: white;\n            border-radius: 10px;\n            box-shadow: 0 0 10px rgba(0,0,0,0.1);\n            z-index: 2147483647;\n            display: none;\n        `,c=document.createElement("iframe"),c.style.cssText="\n            width: 100%;\n            height: 100%;\n            border: none;\n            border-radius: 10px;\n        ";const n=new URLSearchParams(e).toString();let t=`${y}/feedback`,o=t;e.defaultBoard&&(o+=`/${encodeURIComponent(e.defaultBoard)}`);c.src=`${o}?${n}`,s.appendChild(c),document.body.appendChild(s);document.querySelectorAll("[data-feedbackchimp-feedback]").forEach((e=>{e.addEventListener("click",(function(a){a.preventDefault(),a.stopPropagation();const i=e.getAttribute("data-board");o=i?t+`/${encodeURIComponent(i)}`:t,c.src=`${o}?${n}`,w()}))})),e.placement&&function(e,n){const t=document.createElement("style");t.textContent=`\n            :root {\n                --fc-feedback-button-bg-color: ${n};\n                --fc-feedback-button-text-color: 255, 255, 255;\n            }\n            @keyframes feedbackFadeIn {\n                from { opacity: 0; }\n                to { opacity: 1; }\n            }\n            @keyframes animateFeedbackButtonLeft {\n                from { right: -43px; }\n                to { right: -3px; }\n            }\n        `,document.head.appendChild(t);const o=document.createElement("button");o.textContent="Feedback",o.className="fc-feedback-widget-feedback-button";const a="\n            transform: rotate(-90deg) translate(50%, -50%);\n            transform-origin: 100% 50%;\n            animation: feedbackFadeIn .3s ease-in;\n            border-bottom: 2px solid hsla(0, 0%, 100%, .2);\n            bottom: auto;\n            top: 45%;\n            padding: 0 16px 0 13px;\n            background-color: var(--fc-feedback-button-bg-color);\n            background-image: none;\n            border: 1px solid hsla(0, 0%, 100%, .2);\n            border-radius: 8px 8px 0 0;\n            box-sizing: border-box;\n            color: rgba(var(--fc-feedback-button-text-color), 1);\n            cursor: pointer;\n            display: block;\n            font-size: 14px;\n            font-weight: 600;\n            height: 43px;\n            letter-spacing: normal;\n            line-height: 43px;\n            margin: 0;\n            position: fixed;\n            text-align: center;\n            transition: all .25s ease-in-out;\n            user-select: none;\n            width: auto;\n            word-spacing: normal;\n            z-index: 1000000;\n            -webkit-font-smoothing: antialiased;\n            box-shadow: 0 0 10px rgba(17, 24, 39, .2);\n            white-space: nowrap !important;\n        ";o.style.cssText="left"===e?a+"\n            left: -3px;\n            animation: feedbackFadeIn .3s ease-in, animateFeedbackButtonLeft .3s ease-in;\n            transform: rotate(90deg) translate(-50%, -50%);\n            transform-origin: 0% 50%;\n        ":a+"\n            right: -3px;\n            animation: feedbackFadeIn .3s ease-in, animateFeedbackButtonRight .3s ease-in;\n        ";o.addEventListener("mouseover",(function(){this.style[e]="0",this.style.boxShadow="0 0 33px rgba(17, 24, 39, .4)"})),o.addEventListener("mouseout",(function(){this.style[e]="-3px",this.style.boxShadow="0 0 10px rgba(17, 24, 39, .2)"})),o.addEventListener("click",w),document.body.appendChild(o)}(e.placement,e.color||"#007bff");document.addEventListener("click",(function(e){"block"!==s.style.display||b||s.contains(e.target)||e.target.classList.contains("fc-feedback-widget-feedback-button")||e.target.hasAttribute("data-feedbackchimp-feedback")||k()})),window.addEventListener("message",(function(e){e.origin===y&&"closeFeedbackWidget"===e.data&&k()}),!1)}(x);else if("open_feedback_widget"===f){if(!m)return;w()}else{if("unviewed_changelog_count"===f)return h;if("embed"===f){x.basePath||(x.basePath=""),p=x,n=document.querySelector("[data-feedbackchimp-embed]"),n||(n=document.createElement("div"),n.setAttribute("data-feedbackchimp-embed",""),document.body.appendChild(n)),u=!0;const F=document.createElement("iframe");F.style.cssText="\n            width: 100%;\n            height: 100%;\n            border: none;\n        ";const P=new URLSearchParams(x).toString();F.src=`https://${x.organization}.feedbackchimp.space?${P}`,n.appendChild(F),v(),window.addEventListener("popstate",(function(e){v(!0)})),window.addEventListener("message",(function(e){if(e.origin===`https://${x.organization}.feedbackchimp.space`&&"routeChange"===e.data.type){let n=`${e.data.path}`;x.basePath&&(n=`${x.basePath}${n}`),window.location.pathname!==n&&window.history.pushState(null,"",n)}}),!1)}}},f&&f.q&&Array.isArray(f.q)&&f.q.forEach((function(e){window.Feedbackchimp.apply(null,e)}))}();
